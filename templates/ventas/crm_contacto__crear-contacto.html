{% extends "ventas/base.html" %}
{% load static %}
{% block head_content %} 
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<link rel="stylesheet" href='{% static "css/crm_phone.css" %}'>
<link rel="stylesheet" href='{% static "css/crm_desktop.css" %}' media="(min-width: 860px)">
<link href="{% static 'css/select2.min.css' %}" rel="stylesheet" />

<title>Crear contácto | Yee Solutions</title>
{% endblock %}

{% block container %}

<section class="super-container">
    <div class="container-main hg">
        <section class="container_first form-ct">
            <form  class="form-ct__background row g-3" method="POST">

                {% csrf_token %}
                
                <input type="hidden" name="vendedor" value="{{ user.id }}" required>
                
                <!-- Input cliente -->
                <div class="col-12">
                    <label for="id_nombre_comercial" class="form-label wd-full">Escoge a tu cliente: <b class="alert-form">*</b></label>
                    <select
                    id="nombre_comercial" 
                    autocomplete="off" 
                    name="nombre_comercial">
                        <option value="" selected disabled hidden>SELECCIONA A UN CLIENTE</option>
                        {% for clientes in list_empresas %}
                        <option value="{{ clientes.id }}">{{ clientes.nombre_comercial }}</option>
                        {% endfor %}
                    </select>
                    <div class="invalid-feedback">
                        {{ form.nombre_contacto.errors }}
                    </div>
                </div>
                
                <!-- Input contpácto -->
                <div class="col-12">
                    <label for="id_nombre_contacto" class="form-label wd-full">Nombre completo del contácto: <b class="alert-form">*</b></label>
                    <input
                    type="text" 
                    label="nombre_contacto"
                    id = "nombre_contacto"
                    onkeyup = "javascript:this.value=this.value.toUpperCase();"
                    autocomplete="off"
                    maxlength="100"
                    class="form-control" 
                    name="nombre_contacto"
                    required>    
                    <div class="invalid-feedback">
                        {{ form.nombre_contacto.errors }}
                    </div>
                </div>

                <div class="col-12">
                    <label for="id_numero_telefono" class="form-label wd-full">Número telefónico del contácto: <b class="alert-form">*</b></label>
                    <input
                    type="tel"
                    onKeyPress="if(this.value.length==10) return false;"
                    min="10"
                    label="numero_telefono"
                    id = "id_numero_telefono"
                    autocomplete="off"
                    value="" 
                    class="form-control soloNumeros" 
                    name="numero_telefono"
                    required>    
                    <div class="invalid-feedback">
                        Sólo 10 números
                    </div>

                </div>

                <div class="col-12">
                    <label for="id_email" class="form-label wd-full">Correo electrónico: </label>
                    <input
                    type="email"
                    label="email"
                    id = "id_email"
                    onkeyup = "javascript:this.value=this.value.toUpperCase();"
                    autocomplete="off"
                    placeholder="opcional"
                    class="form-control"
                    name="email"
                    >
                    <div class="invalid-feedback">
                        {{ form.email.errors }}
                    </div>
                </div>

                <div class="col-12">
                    <label for="id_cargo" class="form-label wd-full">Indica cuál es su cargo: <b class="alert-form">*</b></label>
                    <input
                    type="text"
                    onKeyPress="if(this.value.length==20) return false;"
                    label="cargo"
                    id = "id_cargo"
                    onkeyup = "javascript:this.value=this.value.toUpperCase();"
                    autocomplete="off"
                    value="" 
                    class="form-control"
                    name="cargo"
                    required>
                </div>

                <div class="invalid-feedback">
                    {{ form.cargo.errors }}
                </div>


                <label for="id_datos_adicionales" class="form-label wd-full">Datos adicionales: <b class="alert-form">*</b></label>
                <textarea
                label="datos_adicionales"
                cols="40"
                rows="10"
                id = "id_datos_adicionales"
                autocomplete="off"
                class="comment form-control"
                name="datos_adicionales"
                required></textarea>
                

                <div class="invalid-feedback">
                    <div class="invalid-feedback">
                        {{ form.datos_adicionales.errors }}
                    </div>  
                </div>
                <b class="alert-form">________</b>
                <b class="alert-form">campos obligatorios</b>
            
                <div class="btn_add_client--cont">
                    <button type="submit" class="btn_add_client">Crear contácto</button>
                </div>

            
            </form>
        </section>
    </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script>

    $(document).ready(function() {
        $('#nombre_comercial').select2();
    });

</script>
<script>
jQuery('.soloNumeros').keypress(function (tecla) {
    if (tecla.charCode < 48 || tecla.charCode > 57) return false;
    });
</script>

{% endblock %}