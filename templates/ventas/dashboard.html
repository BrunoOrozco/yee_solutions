{% extends "ventas/base.html" %}
{% load static %}
{% load mathfilters %}
{% load humanize %}

{% block head_content %} 
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<link rel="stylesheet" href='{% static "css/dashboard-p.css" %}'>
<link rel="stylesheet" href='{% static "css/dashboard-d.css" %}' media="(min-width: 860px)">
<title>Dashboard | Yee Solutions</title>
{% endblock %}  

{% block container %}
<section class="cont_main" oncontextmenu='return false' onkeydown='return false' onselectstart='return false' ondragstart="return false">
    <div class="ct-hd">
        
        <h1 class="title"><a class="link" href="{% url 'dashboard_ventas' %}">Avance mensual de ventas</a></h1>
        <div class="rows">
            <div class="rows__index" style="min-width: 286px;">
                <div class="rows__index--column">
                    <div class="rows__index--column-cnt">
                        <div>
                            <div class="rows__index--column-title">Venta</div>
                            <div class="flex">
                                <div class="rows__index--column-simbol">$</div>
                                {% if subtotal > 0 %}
                                <div class="rows__index--column-number">{{ subtotal|intcomma }}</div>
                                {% else %}
                                <div class="rows__index--column-number">0</div>
                                {% endif %}
                            </div>                     
                        </div> 
                        <div>
                            <div class="rows__index--column-title">GAP</div>
                            <div class="flex">
                                <div class="rows__index--column-simbol">$</div>
                                {% if subtotal > 0 %}
                                <div class="rows__index--column-number">{{ subtotal|sub:objetivo|abs|intcomma }}</div>
                                {% else %}
                                <div class="rows__index--column-number">{{ objetivo }}</div>
                                {% endif %}
                            </div>                     
                        </div> 
                        <div>
                            <div class="rows__index--column-title">Objetivo</div>
                            <div class="flex">
                                <div class="rows__index--column-simbol">$</div>
                                <div class="rows__index--column-number">{{ objetivo|intcomma }}</div>                        
                            </div>
                        </div>
                    </div>
                    <div class="progress">
                        <div class="progress-bar progress-bar-striped progress-bar-animated bg-success" 
                        role="progressbar" 
                        style="width:{% if subtotal > 0 and subtotal <= objetivo %} 
                                     {{ subtotal|mul:100|div:objetivo|floatformat:"0" }}%
                                     {% elif subtotal > objetivo %}
                                     100%
                                     {% else %}
                                     0%
                                     {% endif %}"

                                     aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">{{ subtotal|mul:100|div:objetivo|floatformat:"1" }}%</div>

                    </div>
                </div>
            </div>
            <h4 class="title subtitle" style="font-size: 1rem;">Última actualización: {{ ultima_act.0.fecha }}</h4>
        </div>
        <h2 class="title subtitle">Avances por cliente</h2>
        <div class="ctn-table">
            <div style="height: 40vh" class="scrolls">
                <table class="table table-dark table-hover">
                    <thead>
                        <tr>
                            <th style="background-color: #52bd0a;" scope="col">CLIENTE</th>
                            <th style="background-color: #52bd0a;" scope="col">OBJ</th>
                            <th style="background-color: #52bd0a;" scope="col">VTA</th>
                            <th style="background-color: #52bd0a;" scope="col">GAP</th>
                            <th style="background-color: #52bd0a;" scope="col">%</th>
                            <th style="background-color: #52bd0a;" scope="col">CAL</th>
                        </tr>
                    </thead>
                        <tbody style="width: 90vw">
                            {% for list in list_clientes %}
                            <tr>
                                <th scope="row">
                                    <a class="clientes link " href="{{ list.cliente }}/">
                                        <b>{{ list.cliente | title }}</b>
                                    </a>
                                </th>
                                <td >{{ list.objetivo }}</td>
                                <td>...</td>
                                <th>...</th>
                                <td >...</td>
                                <td>{{ list.calificacion }}</td>
                            </tr>
                            {% endfor %}
                           
                        </tbody>
                </table>
            </div>
        </div>
        <!--
        <h2 class="title subtitle">Avances por categoría</h2>
        <div class="ctn-table">
            <div class="scrolls">
                <table class="table table-dark table-hover">
                    <thead>
                        <tr>
                            <th style="background-color: #52bd0a;" scope="col">CATEGORIA</th>
                            <th style="background-color: #52bd0a;" scope="col">OBJ</th>
                            <th style="background-color: #52bd0a;" scope="col">VTA</th>
                            <th style="background-color: #52bd0a;" scope="col">GAP</th>
                            <th style="background-color: #52bd0a;" scope="col">%</th>
                            <th style="background-color: #52bd0a;" scope="col">CAL</th>
                            <th style="background-color: #52bd0a;" scope="col">PART</th>
                        </tr>
                    </thead>
                        <tbody style="width: 90vw">
                            <tr>
                                <th scope="row">Contac...to</th>
                                <td >...</td>
                                <td>...</td>
                                <th>...</th>
                                <td >...</td>
                                <td>...</td>
                                <td>...</td>
                            </tr>
                           
                        </tbody>
                </table>
            </div>
        </div>
        <h2 class="title subtitle">Avances por producto</h2>
        <div class="ctn-table">
            <div class="scrolls">
                <table class="table table-dark table-hover">
                    <thead>
                        <tr>
                            <th style="background-color: #52bd0a;" scope="col">PRODUCTOS</th>
                            <th style="background-color: #52bd0a;" scope="col">OBJ</th>
                            <th style="background-color: #52bd0a;" scope="col">VTA</th>
                            <th style="background-color: #52bd0a;" scope="col">GAP</th>
                            <th style="background-color: #52bd0a;" scope="col">%</th>
                            <th style="background-color: #52bd0a;" scope="col">CAL</th>
                            <th style="background-color: #52bd0a;" scope="col">PART</th>
                        </tr>
                    </thead>
                        <tbody style="width: 90vw">
                            <tr>
                                <th scope="row">Contac...to</th>
                                <td >...</td>
                                <td>...</td>
                                <th>...</th>
                                <td >...</td>
                                <td>...</td>
                                <td>...</td>
                            </tr>
                           
                        </tbody>
                </table>
            </div>
        </div>
        -->



    </div>
</section>
{% endblock %}
